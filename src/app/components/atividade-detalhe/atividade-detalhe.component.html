<h1 class="h1 text-center mb-4">Atividade</h1>

<form #atividadeForm="ngForm" (ngSubmit)="onSubmit()">
  <table class="table">
    <thead class="thead-dark">
      <tr>
        <th scope="col"></th>
        <th scope="col">Id</th>
        <th scope="col">Título</th>
        <th scope="col">Descrição</th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td></td>
        <td>{{atividade?.id}}</td>
        <td><input type="text" [(ngModel)]="atividade.titulo" name="titulo" required class="form-control"></td>
        <td><input type="text" [(ngModel)]="atividade.descricao" name="descricao" required class="form-control"></td>
        <td><button type="submit" class="btn btn-primary">Salvar</button></td>
      </tr>
    </tbody>
  </table>
</form>

<h1 class="h1 text-center mb-4">Usuário</h1>
<table class="table">
  <thead class="thead-dark">
    <tr>
      <th scope="col"></th>
      <th scope="col">Id</th>
      <th scope="col">Nome</th>
      <th scope="col"></th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    <tr *ngIf="atividade?.usuarioModel">
      <td></td>
      <td>{{atividade.usuarioModel?.id}}</td>
      <td>{{atividade.usuarioModel?.username}}</td>
      <td><a [routerLink]="['/usuarios', atividade.usuarioModel?.id]">Visualizar</a></td>
      <td>
        <button class="btn btn-warning" (click)="alterarUsuario()">Alterar</button>
        <div *ngIf="alterandoUsuario">
          <select class="form-control" (change)="selecionarUsuario($event)">
            <option value="">Selecione um usuário</option>
            <option *ngFor="let usuario of usuarios" [value]="usuario.id">{{usuario.username}}</option>
          </select>
        </div>
      </td>
    </tr>
    <tr *ngIf="!atividade?.usuarioModel">
      <td colspan="5">
        <select class="form-control" (change)="selecionarUsuario($event)">
          <option value="">Selecione um usuário</option>
          <option *ngFor="let usuario of usuarios" [value]="usuario.id">{{usuario.username}}</option>
        </select>
      </td>
    </tr>
  </tbody>
</table>

<h1 class="h1 text-center mb-4">Artefato</h1>
<table class="table">
  <thead class="thead-dark">
    <tr>
      <th scope="col"></th>
      <th scope="col">Id</th>
      <th scope="col">Título</th>
      <th scope="col">Descrição</th>
      <th scope="col"></th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    <tr *ngIf="atividade?.artefatoModel">
      <td></td>
      <td>{{atividade.artefatoModel?.id}}</td>
      <td>{{atividade.artefatoModel?.titulo}}</td>
      <td>{{atividade.artefatoModel?.descricao}}</td>
      <td><a [routerLink]="['/artefatos', atividade.artefatoModel?.id]">Visualizar</a></td>
      <td>
        <button class="btn btn-warning" (click)="alterarArtefato()">Alterar</button>
        <div *ngIf="alterandoArtefato">
          <select class="form-control" (change)="selecionarArtefato($event)">
            <option value="">Selecione um artefato</option>
            <option *ngFor="let artefato of artefatos" [value]="artefato.id">{{artefato.titulo}}</option>
          </select>
        </div>
      </td>
    </tr>
    <tr *ngIf="!atividade?.artefatoModel">
      <td colspan="6">
        <select class="form-control" (change)="selecionarArtefato($event)">
          <option value="">Selecione um artefato</option>
          <option *ngFor="let artefato of artefatos" [value]="artefato.id">{{artefato.titulo}}</option>
        </select>
      </td>
    </tr>
  </tbody>
</table>
